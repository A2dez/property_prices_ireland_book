{
  "hash": "81920dad361d283158b35dcb6fbb19fa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Flipping hell: the absolute state of Ireland's property price index.\"\n---\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\nThe property price index is a truly valuable resource which lists the price of every gaff sold in (the twenty-six counties of) Ireland since 2010. That's 733887 house sales at the time of writing. Unfortunately, the database was designed by people who 'know the price of everything but the value of nothing'. Allegedly, the data has been uploaded one entry at a time, by solicitors' secretaries, many of whom express their humanity through misspelling and irregular punctuation, while several express their Irishness with the *cúpla focail*. Understanding the data is thus a bit like being given a big five-bed house for a holiday but having to wade through the previous tenants' filth.\n\nMy role here is to take this unkempt raw data and flip it, scrubbing it goodo, and presenting it back to you, the reader, as an inhabitable space which, I hope, you can explore with some pleasure.\n\n### What is contained in the data?\n\nLet's have quick look at the last few rows.vect\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 9\n  `Date of Sale (dd/mm/yyyy)` Address            County Eircode `Price (\\u0080)`\n  <chr>                       <chr>              <chr>  <chr>   <chr>           \n1 18/07/2025                  GALWAY RD, ROSCOM… Rosco… F42A371 \"\\u0080278,000.…\n2 18/07/2025                  GLENBOWER HOUSE, … Wexfo… Y25PE02 \"\\u0080700,000.…\n3 18/07/2025                  GRACETON, DOORADO… Limer… V94D7EV \"\\u0080413,000.…\n4 18/07/2025                  LISCARROLL, MALLO… Cork   P51X7X9 \"\\u0080200,000.…\n5 18/07/2025                  LR CAMUS, CAMUS, … Galway H91RK6Y \"\\u0080126,000.…\n6 18/07/2025                  PINELAWNS, RED LA… Wickl… A98N670 \"\\u0080750,000.…\n# ℹ 4 more variables: `Not Full Market Price` <chr>, `VAT Exclusive` <chr>,\n#   `Description of Property` <chr>, `Property Size Description` <chr>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\nEach house sale has a date, a sale price, and an address, so that you can spy on your neighbours, or eye up the old price of a gaff you are interested in. If it has been sold since 2010. There is a useful column for the county so that we can divvy up the data into 26 important groups.\n\nThere is also some secondary data, such as whether the property was sold at the market price or not, whether VAT was charged, whether the house was new or second-hand. Occasionally a size category is included,roughly equating to tiny (\\<38sq. m), large (\\> 125 sq.m) or anything in-between.\n\nWe will look at each of these columns in turn and, in doing so, I will clean them up, before plotting the cleaner version of the data.\n\n### Column names\n\nThe first thing to note is that the column names need cleaning as they were designed for humans to read rather than for people telling computers what to do.\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Date of Sale (dd/mm/yyyy)\" \"Address\"                  \n[3] \"County\"                    \"Eircode\"                  \n[5] \"Price (\\u0080)\"            \"Not Full Market Price\"    \n[7] \"VAT Exclusive\"             \"Description of Property\"  \n[9] \"Property Size Description\"\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\nSpaces are an anathema to coders so they need to go and they can be replaced with underscore, where necessary. Lowercase letters are easier to code with, mostly, because you don't have to remember when you put capitals in. Ideally we'd just take the first word of the column, and we could rename the columns formulaically, e.g with a regex such as `.*?(?=\\s|$)`, but the first word may not be the most important. 'Property Size Description' is better represented by 'size' than 'property' or 'description'. Thus we can rename the columns manually:\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"date\"         \"address\"      \"county\"       \"eircode\"      \"price\"       \n[6] \"market_price\" \"vat\"          \"new\"          \"size\"        \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# It should be noted that there are a few houses with eircodes befored 2020\n # property %>%\n #  filter(year < 2021, !is.na(eircode)) %>%\n #  View\n\n# property_raw %>%\n  # left_join(postcode_dfrm)\n```\n:::\n\n\n\n\n\n\n\n\n### Dates and sales\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\nSo the simplest thing to look at is how many properties have been sold each year since they started collecting the data.\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-c10e19488c18fa021cd9\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c10e19488c18fa021cd9\">{\"x\":{\"data\":[{\"x\":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],\"y\":[21001,18440,25370,30217,43667,49162,49931,55015,57446,59052,49540,59579,62713,63298,61241,28215],\"text\":[\"year: 2010<br />sales: 21001\",\"year: 2011<br />sales: 18440\",\"year: 2012<br />sales: 25370\",\"year: 2013<br />sales: 30217\",\"year: 2014<br />sales: 43667\",\"year: 2015<br />sales: 49162\",\"year: 2016<br />sales: 49931\",\"year: 2017<br />sales: 55015\",\"year: 2018<br />sales: 57446\",\"year: 2019<br />sales: 59052\",\"year: 2020<br />sales: 49540\",\"year: 2021<br />sales: 59579\",\"year: 2022<br />sales: 62713\",\"year: 2023<br />sales: 63298\",\"year: 2024<br />sales: 61241\",\"year: 2025<br />sales: 28215\"],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"width\":7.559055118110237,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,165,0,1)\",\"opacity\":1,\"size\":15.118110236220474,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,165,0,1)\"}},\"frame\":null}],\"layout\":{\"margin\":{\"t\":42.168534661685349,\"r\":7.3059360730593621,\"b\":24.508094645080945,\"l\":37.525944375259442},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> <i> Number of properties sold in Ireland each year, 2010-present <\\/i> <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":15.940224159402243},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[2009.25,2025.75],\"tickmode\":\"array\",\"ticktext\":[\"2010\",\"2011\",\"2012\",\"2013\",\"2014\",\"2015\",\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\",\"2024\",\"2025\"],\"tickvals\":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],\"categoryorder\":\"array\",\"categoryarray\":[\"2010\",\"2011\",\"2012\",\"2013\",\"2014\",\"2015\",\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\",\"2024\",\"2025\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":10.62681610626816},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"<b>  <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":13.283520132835198}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,65000],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20000\",\"40000\",\"60000\"],\"tickvals\":[0,20000,40000,60000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20000\",\"40000\",\"60000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":10.62681610626816},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"<b>  <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":13.283520132835198}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"layer\":\"below\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"165455dd7051\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"1654593f5c46\":{\"x\":{},\"y\":{}}},\"cur_data\":\"165455dd7051\",\"visdat\":{\"165455dd7051\":[\"function (y) \",\"x\"],\"1654593f5c46\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\nIt's pretty clear that there's a massive difference between the recession of 2010-13 and the sudden return to form in 2014, followed by five more years of increased sales before Covid. Unsurprisingly, sales dropped in 2020, but they didn't nosedive like, say, the airline industry, and 2021 shows a return to 2019 levels.\n\nAt the time of writing (November 2022), it is not immediately obvious if sales will increase from 2021, but, if we break down sales by month, as in the plot below, then that seems likely, as each month has been consistently a wee bit ahead thus far. This resolution makes it possible to see inside the grim years of the Covid pandemic. Understandably there were reduced sales in April 2020 (2647 sales vs 4562 in 2019), May (2592 v 4940), June (3083 v 4356), but things re-normalized by October (5576 v 5579) and November (5379 v 5264), while the end-of-year rush in the 'meaningful' month of December 2020 (7474 sales) was a good deal larger than December 2019 (6798).\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-79811cdca48a782123f0\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-79811cdca48a782123f0\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[50845,52240,42054,52461,55885,56076,54378],\"x\":[1,2,3,4,5,6,7],\"y\":[6601,6812,7486,7118,6828,7222,6863],\"text\":[\"count: 6601<br />year: 2018<br />month: Dec\",\"count: 6812<br />year: 2019<br />month: Dec\",\"count: 7486<br />year: 2020<br />month: Dec\",\"count: 7118<br />year: 2021<br />month: Dec\",\"count: 6828<br />year: 2022<br />month: Dec\",\"count: 7222<br />year: 2023<br />month: Dec\",\"count: 6863<br />year: 2024<br />month: Dec\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(252,255,164,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Dec\",\"legendgroup\":\"Dec\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[45242,46974,36660,46852,49843,50361,48723],\"x\":[1,2,3,4,5,6,7],\"y\":[5603,5266,5394,5609,6042,5715,5655],\"text\":[\"count: 5603<br />year: 2018<br />month: Nov\",\"count: 5266<br />year: 2019<br />month: Nov\",\"count: 5394<br />year: 2020<br />month: Nov\",\"count: 5609<br />year: 2021<br />month: Nov\",\"count: 6042<br />year: 2022<br />month: Nov\",\"count: 5715<br />year: 2023<br />month: Nov\",\"count: 5655<br />year: 2024<br />month: Nov\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(245,219,75,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Nov\",\"legendgroup\":\"Nov\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[39775,41387,31071,41269,44326,44737,42481],\"x\":[1,2,3,4,5,6,7],\"y\":[5467,5587,5589,5583,5517,5624,6242],\"text\":[\"count: 5467<br />year: 2018<br />month: Oct\",\"count: 5587<br />year: 2019<br />month: Oct\",\"count: 5589<br />year: 2020<br />month: Oct\",\"count: 5583<br />year: 2021<br />month: Oct\",\"count: 5517<br />year: 2022<br />month: Oct\",\"count: 5624<br />year: 2023<br />month: Oct\",\"count: 6242<br />year: 2024<br />month: Oct\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(252,173,18,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Oct\",\"legendgroup\":\"Oct\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[35181,36285,26725,35909,38570,39217,37372],\"x\":[1,2,3,4,5,6,7],\"y\":[4594,5102,4346,5360,5756,5520,5109],\"text\":[\"count: 4594<br />year: 2018<br />month: Sep\",\"count: 5102<br />year: 2019<br />month: Sep\",\"count: 4346<br />year: 2020<br />month: Sep\",\"count: 5360<br />year: 2021<br />month: Sep\",\"count: 5756<br />year: 2022<br />month: Sep\",\"count: 5520<br />year: 2023<br />month: Sep\",\"count: 5109<br />year: 2024<br />month: Sep\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(247,131,17,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Sep\",\"legendgroup\":\"Sep\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[30229,31212,23735,31140,33476,33512,32435],\"x\":[1,2,3,4,5,6,7],\"y\":[4952,5073,2990,4769,5094,5705,4937],\"text\":[\"count: 4952<br />year: 2018<br />month: Aug\",\"count: 5073<br />year: 2019<br />month: Aug\",\"count: 2990<br />year: 2020<br />month: Aug\",\"count: 4769<br />year: 2021<br />month: Aug\",\"count: 5094<br />year: 2022<br />month: Aug\",\"count: 5705<br />year: 2023<br />month: Aug\",\"count: 4937<br />year: 2024<br />month: Aug\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(230,93,47,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Aug\",\"legendgroup\":\"Aug\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[24990,25655,20045,25956,27897,28116,26703,26306],\"x\":[1,2,3,4,5,6,7,8],\"y\":[5239,5557,3690,5184,5579,5396,5732,1909],\"text\":[\"count: 5239<br />year: 2018<br />month: Jul\",\"count: 5557<br />year: 2019<br />month: Jul\",\"count: 3690<br />year: 2020<br />month: Jul\",\"count: 5184<br />year: 2021<br />month: Jul\",\"count: 5579<br />year: 2022<br />month: Jul\",\"count: 5396<br />year: 2023<br />month: Jul\",\"count: 5732<br />year: 2024<br />month: Jul\",\"count: 1909<br />year: 2025<br />month: Jul\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(203,65,73,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Jul\",\"legendgroup\":\"Jul\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[20355,21280,16955,21225,22452,22642,21797,21819],\"x\":[1,2,3,4,5,6,7,8],\"y\":[4635,4375,3090,4731,5445,5474,4906,4487],\"text\":[\"count: 4635<br />year: 2018<br />month: Jun\",\"count: 4375<br />year: 2019<br />month: Jun\",\"count: 3090<br />year: 2020<br />month: Jun\",\"count: 4731<br />year: 2021<br />month: Jun\",\"count: 5445<br />year: 2022<br />month: Jun\",\"count: 5474<br />year: 2023<br />month: Jun\",\"count: 4906<br />year: 2024<br />month: Jun\",\"count: 4487<br />year: 2025<br />month: Jun\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(169,46,94,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Jun\",\"legendgroup\":\"Jun\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[15656,16334,14360,17027,17692,17427,16537,16719],\"x\":[1,2,3,4,5,6,7,8],\"y\":[4699,4946,2595,4198,4760,5215,5260,5100],\"text\":[\"count: 4699<br />year: 2018<br />month: May\",\"count: 4946<br />year: 2019<br />month: May\",\"count: 2595<br />year: 2020<br />month: May\",\"count: 4198<br />year: 2021<br />month: May\",\"count: 4760<br />year: 2022<br />month: May\",\"count: 5215<br />year: 2023<br />month: May\",\"count: 5260<br />year: 2024<br />month: May\",\"count: 5100<br />year: 2025<br />month: May\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(133,33,107,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"May\",\"legendgroup\":\"May\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[11706,11770,11700,12797,13126,13198,12109,12097],\"x\":[1,2,3,4,5,6,7,8],\"y\":[3950,4564,2660,4230,4566,4229,4428,4622],\"text\":[\"count: 3950<br />year: 2018<br />month: Apr\",\"count: 4564<br />year: 2019<br />month: Apr\",\"count: 2660<br />year: 2020<br />month: Apr\",\"count: 4230<br />year: 2021<br />month: Apr\",\"count: 4566<br />year: 2022<br />month: Apr\",\"count: 4229<br />year: 2023<br />month: Apr\",\"count: 4428<br />year: 2024<br />month: Apr\",\"count: 4622<br />year: 2025<br />month: Apr\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(96,19,110,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Apr\",\"legendgroup\":\"Apr\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[7407,7457,7235,7600,8286,7977,7657,7624],\"x\":[1,2,3,4,5,6,7,8],\"y\":[4299,4313,4465,5197,4840,5221,4452,4473],\"text\":[\"count: 4299<br />year: 2018<br />month: Mar\",\"count: 4313<br />year: 2019<br />month: Mar\",\"count: 4465<br />year: 2020<br />month: Mar\",\"count: 5197<br />year: 2021<br />month: Mar\",\"count: 4840<br />year: 2022<br />month: Mar\",\"count: 5221<br />year: 2023<br />month: Mar\",\"count: 4452<br />year: 2024<br />month: Mar\",\"count: 4473<br />year: 2025<br />month: Mar\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(58,9,99,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Mar\",\"legendgroup\":\"Mar\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[3364,3290,3560,3177,3648,3649,3466,3541],\"x\":[1,2,3,4,5,6,7,8],\"y\":[4043,4167,3675,4423,4638,4328,4191,4083],\"text\":[\"count: 4043<br />year: 2018<br />month: Feb\",\"count: 4167<br />year: 2019<br />month: Feb\",\"count: 3675<br />year: 2020<br />month: Feb\",\"count: 4423<br />year: 2021<br />month: Feb\",\"count: 4638<br />year: 2022<br />month: Feb\",\"count: 4328<br />year: 2023<br />month: Feb\",\"count: 4191<br />year: 2024<br />month: Feb\",\"count: 4083<br />year: 2025<br />month: Feb\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(20,11,53,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Feb\",\"legendgroup\":\"Feb\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[3364,3290,3560,3177,3648,3649,3466,3541],\"text\":[\"count: 3364<br />year: 2018<br />month: Jan\",\"count: 3290<br />year: 2019<br />month: Jan\",\"count: 3560<br />year: 2020<br />month: Jan\",\"count: 3177<br />year: 2021<br />month: Jan\",\"count: 3648<br />year: 2022<br />month: Jan\",\"count: 3649<br />year: 2023<br />month: Jan\",\"count: 3466<br />year: 2024<br />month: Jan\",\"count: 3541<br />year: 2025<br />month: Jan\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,4,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Jan\",\"legendgroup\":\"Jan\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":42.168534661685349,\"r\":7.3059360730593621,\"b\":24.508094645080945,\"l\":37.525944375259442},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> <i> Number of properties sold each month and year in Ireland:<br />2018–present <\\/i> <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":15.940224159402243},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\",\"2024\",\"2025\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\",\"2024\",\"2025\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":10.62681610626816},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"<b>  <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":13.283520132835198}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-3164.9000000000001,66462.899999999994],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20000\",\"40000\",\"60000\"],\"tickvals\":[0,20000,40000,60000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20000\",\"40000\",\"60000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":10.62681610626816},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"<b>  <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":13.283520132835198}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"layer\":\"below\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"16547fc364b1\":{\"x\":{},\"fill\":{},\"type\":\"bar\"}},\"cur_data\":\"16547fc364b1\",\"visdat\":{\"16547fc364b1\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\nOne last thing to note, before I get too far into the weeds, is that there hasn't been a bounceback from the \"missing\" 10,000 sales in 2020. Instead, the 2021 and 2022 sales totals look like a natural progression from the years leading up to 2020.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: false\n#| message: false\n#| warning: false\n(property_sales_by_quarter <-\n  property %>%\n    filter(year > 2018, year <= 2022) %>%\n  ggplot(aes (x = factor(quarter))) + #factor(year) %>% fct_rev\n  geom_bar(aes(fill = ..count..)) +\n  geom_text(stat='count', aes(label=(..count../1000) %>% round(0) %>% paste0(., 'k')), vjust=1) +\n  #coord_flip() +\n  #scale_x_date(breaks = year)+\n  scale_fill_scico(palette = 'bamako') +\n    facet_wrap(~year, scales = 'free_x') +\n  labs(title = paste0(\"Number of properties sold in Ireland: 2019–2022\"),\n       y = '',\n       x = '') +\n  my_theme +\n   theme(legend.position = 'none'))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\nℹ Please use `after_stat(count)` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2_clean_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n### Eircodes\n\nRecent years have contained eircode data which is a great addition, but unfortunately that column has been added at the expense of an postcode column which, while sparsely populated and confined solely to Dublin, will remain a useful bit of data when we are trying to find which towns and villages belong in which part of Dublin.\n\nBefore we examine eircode data, we need to convert the 'date' column from a string to an actual date variable, and also extract the months, weeks, day and day of the week, as this may be valuable data for modelling later.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 16 × 3\n# Groups:   year [16]\n    year `FALSE` `TRUE`\n   <dbl>   <int>  <int>\n 1  2025    7115  21100\n 2  2024   15107  46134\n 3  2023   15020  48278\n 4  2022   14496  48217\n 5  2021   28963  30616\n 6  2020   49172    368\n 7  2019   58868    184\n 8  2018   57343    103\n 9  2017   54911    104\n10  2016   49861     70\n11  2015   49122     40\n12  2014   43616     51\n13  2013   30197     20\n14  2012   25370     NA\n15  2011   18439      1\n16  2010   21001     NA\n```\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](2_clean_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n### New homes versus old\n\nBefore we look at the frightening cost of a gaff in this country, I'm going to clean up the \"Property Description\" column, which is the one that tells you if the gaff is new or old. This will give us an introduction to the absolute state of this dataset:\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n                                  group  count\n1 Second-Hand Dwelling house /Apartment 607287\n2         New Dwelling house /Apartment 126552\n3        Teach/Árasán Cónaithe Atháimhe     44\n4             Teach/Árasán Cónaithe Nua      3\n5             Teach/?ras?n C?naithe Nua      1\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\nThe label 'New Dwelling house /Apartment' is not computer-friendly and I have changed it to 'nww. Similarly, 'Second-Hand Dwelling house /Apartment' will become 'Old' an underdescriptive label that at least contrasts nicely against 'New'. *Mar sin féin*, `new_or_old$count[3:nrow(new_or_old)] %>% sum` properties have had their description listed in Irish, so we need to clean those up, and basically translate them back into English. There have been some issues importing the fadas (accents) but we can still group them using ad-hoc regexes.\n\nIt is not yet the time to concern ourselves with the fact that only `new_or_old_cleaned$count[2]` new properties (`(100*new_or_old_cleaned$count[2]/nrow(property)) %>% round(1) %>% paste0(.,'%')` of them) have been sold in a country which has grown by just over half a million people since 2010.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: false\n#| message: false\n#| warning: false\n\n# (with a cheeky capital because it'll save me manually relabelling axes later at little cos).\n\n#relabel the Irish & make logical\nproperty$new <- \n  ifelse(str_detect(property$new, 'Nua$'), \n         'New Dwelling house /Apartment', \n         ifelse(str_detect(property$new , 'imhe$'), \n                'Second-Hand Dwelling house /Apartment', \n                property$new))  %>% \n  factor  %>% \n  fct_drop() %>% #removes empty levels e.g. ones in Irish \n  fct_recode('New' = 'New Dwelling house /Apartment',\n             'Old' = 'Second-Hand Dwelling house /Apartment')\n\n(new_or_old_cleaned <- \n    vector_count_dfrm(property$new) %>%\n    mutate(percentage = ((100*count)/sum(count)) %>% round(2)\n           )\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  group  count percentage\n1   Old 607331      82.76\n2   New 126556      17.24\n```\n\n\n:::\n\n```{.r .cell-code}\nproperty$new %>% fct_drop -> property$new\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\n### Price by year\n\nBefore analysing prices, we need to clean up the price column which includes unwanted commas, badly imported euro symbols, and some unexpected spare change after the decimal point.\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n.\n     ,      . \\u0080 \n747737 733887 733887 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\n### Spare Change\n\nIt is curious to note that house prices are not always sold to the nearest euro and an enormous number of properties have a few cents tacked on at the end. I thought that this information might be interesting as part of a modelling task, looking for clues into who is buying the houses (e.g, if a price ends in 50c, then there might well have been two bought together). Either way, it ended up being an excuse to create a polar bar chart.\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2_clean_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n### House prices by county\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](2_clean_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "2_clean_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/plotly-binding-4.11.0/plotly.js\"></script>\n<script src=\"site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}